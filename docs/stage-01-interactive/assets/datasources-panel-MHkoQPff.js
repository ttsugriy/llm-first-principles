import{s as U}from"./chunk-DZLz74EQ.js";import{c as G,d as re,l as se,n as we}from"./jotai-BTnrNcC1.js";import{t as _e}from"./react-BcIddLXZ.js";import{$t as le,Bt as Se,Dt as Ce,E as $e,Et as Te,Jt as ke,Kt as ne,Mt as oe,Rn as qe,Ut as De,Xt as Fe,Yt as Ee,Zn as me,en as ie,jt as Ie,kt as Le,nn as ze,p as Pe,qt as ce,rn as de,s as Ve,ut as Ae,zt as Oe}from"./cells-DV6dfoCq.js";import"./react-dom-D6bRRS5R.js";import"./zod-U2NFpcFA.js";import{t as ae}from"./compiler-runtime-Cr9loedd.js";import"./_Uint8Array-D5Z9rM2X.js";import"./isSymbol-xTSywenE.js";import"./_arrayMap-DQI2GUNb.js";import"./toString-CBnct2wx.js";import"./toNumber-CTOPJrpu.js";import"./toInteger-Bor4StOs.js";import"./isArrayLikeObject-DKyJYtr8.js";import"./_getTag-CVRrQL_Q.js";import"./_baseIsEqual-CVFfFJm2.js";import"./_toKey-16owuO_q.js";import"./memoize-DhF8x4Aa.js";import"./get-BUGWIXZE.js";import"./_baseFlatten-ViL-mfkw.js";import"./merge-Dvc5opZF.js";import"./_baseSlice-BWZ0PeaJ.js";import"./upperFirst-CBQfDRod.js";import"./_hasUnicode-3DIK_jNi.js";import"./_arrayReduce-DV4IVFuG.js";import"./startCase-RfubwhHM.js";import"./_baseEach-CMG9RfnR.js";import"./hasIn-BgJKauE7.js";import"./_baseProperty-c4IQJQis.js";import"./_createAggregator-CP8XSJVt.js";import"./now-BXqTLlmI.js";import"./debounce-BUM2losY.js";import"./_baseMap-Cw6xPrGQ.js";import{t as pe}from"./sortBy-B2UQBZri.js";import{t as ue}from"./add-database-form-C6bWFcDu.js";import"./hotkeys-ClCtr3_I.js";import"./invariant-D5a0EE05.js";import{o as Me}from"./utils-BpjB6B-Y.js";import"./constants-CEISdYm1.js";import"./config-e9OVB2bJ.js";import{t as Be}from"./ErrorBoundary-5_63wxX3.js";import"./useEventListener-D1FLsfmf.js";import{t as Re}from"./jsx-runtime-mwDPpfh_.js";import{t as M}from"./cn-DEUt_IsG.js";import{r as Ke,t as H}from"./button-Zjtz1syG.js";import"./dist-o3-gJN-A.js";import"./dist-Dv7WCK3M.js";import"./once-3GsqimLM.js";import"./capabilities-CEL4hxAo.js";import"./createReducer-C6dJ71nW.js";import{r as Je}from"./requests-DD3OWR81.js";import"./preload-helper-DImqtvgl.js";import"./dist-DdXBxU_X.js";import"./dist-ws1ADWL0.js";import"./dist-BOJjflZo.js";import"./dist-w3K5vvwl.js";import"./dist-DXPWGCwf.js";import"./dist-BGbJQ9FV.js";import"./stex-w1KpyykF.js";import"./Deferred-Mppm0cvJ.js";import"./uuid-4lb_EYpq.js";import"./key-BOd4SjWu.js";import"./use-toast-BPMVOfO3.js";import"./main-CCaZmKLi.js";import"./marked.esm-BB_RKOA5.js";import"./connection-CsVOmbVi.js";import"./dist-dCpey1ug.js";import{i as Ue}from"./useLifecycle-CxNbfWnk.js";import"./useTheme-CJkb1R7C.js";import"./createLucideIcon-CaU6_Jtx.js";import"./type-DVCC-93H.js";import"./check-Dc7YCRim.js";import{h as We}from"./select-Di-JjADd.js";import"./chevron-right-BExEgq1M.js";import"./circle-plus-UevqeQZu.js";import"./toDate-CnvLb18a.js";import"./circle-x-Bb-EcEyG.js";import"./dropdown-menu-ChUikXiI.js";import"./copy-CDDalEhv.js";import"./spinner-1oeuzoUk.js";import{t as he}from"./plus-DWAWtOBJ.js";import"./refresh-ccw-ETV_gv20.js";import{t as Xe}from"./refresh-cw-DKt4M-wV.js";import"./input-DuVApvWu.js";import"./form-Cdn744fY.js";import{c as xe,d as fe,f as be,l as Q,n as Ye,o as Ze,p as Ge,u as ge}from"./column-preview-BavQbx6K.js";import"./trash-2-D1jEfGpj.js";import"./badge-CxcKOiwY.js";import"./Combination-DWHMUa0d.js";import"./dist-1ZdxNBaX.js";import{t as ee}from"./tooltip-CerBk_un.js";import"./menu-items-Dm8s6sMr.js";import"./useNonce-CL3DrH5R.js";import"./alert-dialog-BZHeDuaE.js";import"./dialog-CzmSXArA.js";import"./usePress-C2JVmCUi.js";import"./SSRProvider-CMB_HLxO.js";import"./context-BqH7Jigl.js";import"./useNumberFormatter-BPGR7t2W.js";import"./numbers-Dft9TKC1.js";import"./useEvent-itkPNnCe.js";import"./useDebounce--Sw2WRQ5.js";import"./ImperativeModal-ExH1h9et.js";import"./strings-DRRWXNT2.js";import"./copy-SPzF4B1M.js";import{t as He}from"./copy-icon-Ckew1l1_.js";import{n as je}from"./useAsyncData-BPaRR7vx.js";import"./kbd-BfBY_QKr.js";import"./label-FIGQlkj5.js";import"./popover-BoRNi4dY.js";import"./links-90C38wV6.js";import"./lazy-ijSQmhmN.js";import{a as Qe,o as te,t as et,u as tt}from"./command-DhuV6_de.js";import{n as at}from"./add-missing-import-pmcK06GU.js";import{n as rt}from"./icons-HGhpVPVr.js";import"./form-q5HZfP0M.js";import{o as st}from"./focus--Piy3rX5.js";import{t as Ne}from"./useAddCell-Ig4Te4YX.js";import"./useInstallPackage-B1IBfLxp.js";import"./toggle-CPnmDQd7.js";import"./field-mNGJv_67.js";import"./textarea-DA_SbCD5.js";import{t as lt}from"./empty-state-n1MMYrpv.js";import"./request-registry-4Ayu0iWH.js";import"./write-secret-modal-DNQ4_yXQ.js";var q=U(_e(),1),nt=U(ae(),1),s=U(Re(),1);const ot=r=>{let e=(0,nt.c)(8),{variableName:t,className:a}=r,n;e[0]===t?n=e[1]:(n=()=>{let x=mt(t);if(!x)return;let j=Pe(x);j&&qe(j,t)},e[0]=t,e[1]=n);let i=n,l;e[2]===a?l=e[3]:(l=M("text-link opacity-80 hover:opacity-100 hover:underline",a),e[2]=a,e[3]=l);let N;return e[4]!==i||e[5]!==l||e[6]!==t?(N=(0,s.jsx)("button",{type:"button",onClick:i,className:l,children:t}),e[4]=i,e[5]=l,e[6]=t,e[7]=N):N=e[7],N};function mt(r){let e=we.get(me)[r];if(e)return e.declaredBy[0]}var B=U(ae(),1),it=re(r=>{let e=r(ke),t=r(me),a=r(Ve);return pe(e,n=>{if(!n.variable_name)return-1;let i=Object.values(t).find(N=>N.name===n.variable_name);if(!i)return 0;let l=a.inOrderIds.indexOf(i.declaredBy[0]);return l===-1?0:l})}),ct=re(r=>{let e=new Map(r(De));for(let t of de){let a=e.get(t);a&&(a.databases.length===0&&e.delete(t),a.databases.length===1&&a.databases[0].name==="memory"&&a.databases[0].schemas.length===0&&e.delete(t))}return pe([...e.values()],t=>de.has(t.name)?1:0)});const dt=()=>{let r=(0,B.c)(32),[e,t]=q.useState(""),a=se(ce),n=G(it),i=G(ct);if(n.length===0&&i.length===0){let d;return r[0]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)(lt,{title:"No tables found",description:"Any datasets/dataframes in the global scope will be shown here.",action:(0,s.jsx)(ue,{children:(0,s.jsxs)(H,{variant:"outline",size:"sm",children:["Add database or catalog",(0,s.jsx)(he,{className:"h-4 w-4 ml-2"})]})}),icon:(0,s.jsx)(oe,{})}),r[0]=d):d=r[0],d}let l=!!e.trim(),N;r[1]===a?N=r[2]:(N=d=>{a(d.length>0),t(d)},r[1]=a,r[2]=N);let x;r[3]!==e||r[4]!==N?(x=(0,s.jsx)(Qe,{placeholder:"Search tables...",className:"h-6 m-1",value:e,onValueChange:N,rootClassName:"flex-1 border-r"}),r[3]=e,r[4]=N,r[5]=x):x=r[5];let j;r[6]===l?j=r[7]:(j=l&&(0,s.jsx)("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",onClick:()=>t(""),children:(0,s.jsx)(We,{className:"h-4 w-4"})}),r[6]=l,r[7]=j);let b;r[8]===Symbol.for("react.memo_cache_sentinel")?(b=(0,s.jsx)(ue,{children:(0,s.jsx)("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:(0,s.jsx)(he,{className:"h-4 w-4"})})}),r[8]=b):b=r[8];let f;r[9]!==x||r[10]!==j?(f=(0,s.jsxs)("div",{className:"flex items-center w-full",children:[x,j,b]}),r[9]=x,r[10]=j,r[11]=f):f=r[11];let m;if(r[12]!==i||r[13]!==l||r[14]!==e){let d;r[16]!==l||r[17]!==e?(d=h=>(0,s.jsx)(pt,{connection:h,hasChildren:h.databases.length>0,children:h.databases.map(p=>(0,s.jsx)(ut,{engineName:h.name,database:p,hasSearch:l,children:(0,s.jsx)(ht,{schemas:p.schemas,defaultSchema:h.default_schema,defaultDatabase:h.default_database,engineName:h.name,databaseName:p.name,hasSearch:l,searchValue:e,dialect:h.dialect})},p.name))},h.name),r[16]=l,r[17]=e,r[18]=d):d=r[18],m=i.map(d),r[12]=i,r[13]=l,r[14]=e,r[15]=m}else m=r[15];let g;r[19]!==i.length||r[20]!==n.length?(g=i.length>0&&n.length>0&&(0,s.jsxs)(xe,{children:[(0,s.jsx)(rt,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-xs",children:"Python"})]}),r[19]=i.length,r[20]=n.length,r[21]=g):g=r[21];let c;r[22]!==e||r[23]!==n?(c=n.length>0&&(0,s.jsx)(ye,{tables:n,searchValue:e}),r[22]=e,r[23]=n,r[24]=c):c=r[24];let u;r[25]!==m||r[26]!==g||r[27]!==c?(u=(0,s.jsxs)(tt,{className:"flex flex-col",children:[m,g,c]}),r[25]=m,r[26]=g,r[27]=c,r[28]=u):u=r[28];let o;return r[29]!==f||r[30]!==u?(o=(0,s.jsxs)(et,{className:"border-b bg-background rounded-none h-full pb-10 overflow-auto outline-hidden",shouldFilter:!1,children:[f,u]}),r[29]=f,r[30]=u,r[31]=o):o=r[31],o};var pt=r=>{let e=(0,B.c)(26),{connection:t,children:a,hasChildren:n}=r,i=t.name===ze,l=i?"In-Memory":t.name,{previewDataSourceConnection:N}=Je(),[x,j]=q.useState(!1),b;e[0]!==t.name||e[1]!==N?(b=async()=>{j(!0),await N({engine:t.name}),setTimeout(()=>j(!1),500)},e[0]=t.name,e[1]=N,e[2]=b):b=e[2];let f=b,m;e[3]===t.dialect?m=e[4]:(m=(0,s.jsx)(Ae,{className:"h-4 w-4 text-muted-foreground",name:t.dialect}),e[3]=t.dialect,e[4]=m);let g;e[5]===t.dialect?g=e[6]:(g=Te(t.dialect),e[5]=t.dialect,e[6]=g);let c;e[7]===g?c=e[8]:(c=(0,s.jsx)("span",{className:"text-xs",children:g}),e[7]=g,e[8]=c);let u=l,o;e[9]===u?o=e[10]:(o=(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",(0,s.jsx)(ot,{variableName:u}),")"]}),e[9]=u,e[10]=o);let d;e[11]!==f||e[12]!==i||e[13]!==x?(d=!i&&(0,s.jsx)(ee,{content:"Refresh connection",children:(0,s.jsx)(H,{variant:"ghost",size:"icon",className:"ml-auto hover:bg-transparent hover:shadow-none",onClick:f,children:(0,s.jsx)(Xe,{className:M("h-4 w-4 text-muted-foreground hover:text-foreground",x&&"animate-[spin_0.5s]")})})}),e[11]=f,e[12]=i,e[13]=x,e[14]=d):d=e[14];let h;e[15]!==m||e[16]!==c||e[17]!==o||e[18]!==d?(h=(0,s.jsxs)(xe,{children:[m,c,o,d]}),e[15]=m,e[16]=c,e[17]=o,e[18]=d,e[19]=h):h=e[19];let p;e[20]!==a||e[21]!==n?(p=n?a:(0,s.jsx)(Q,{content:"No databases available",className:"pl-2"}),e[20]=a,e[21]=n,e[22]=p):p=e[22];let y;return e[23]!==h||e[24]!==p?(y=(0,s.jsxs)(s.Fragment,{children:[h,p]}),e[23]=h,e[24]=p,e[25]=y):y=e[25],y},ut=r=>{let e=(0,B.c)(25),{hasSearch:t,engineName:a,database:n,children:i}=r,[l,N]=q.useState(!1),[x,j]=q.useState(!1),[b,f]=q.useState(t);b!==t&&(f(t),N(t));let m;e[0]!==l||e[1]!==x?(m=()=>{N(!l),j(!x)},e[0]=l,e[1]=x,e[2]=m):m=e[2];let g=`${a}:${n.name}`,c;e[3]===l?c=e[4]:(c=(0,s.jsx)(be,{isExpanded:l}),e[3]=l,e[4]=c);let u=x&&l?"text-foreground":"text-muted-foreground",o;e[5]===u?o=e[6]:(o=M("h-4 w-4",u),e[5]=u,e[6]=o);let d;e[7]===o?d=e[8]:(d=(0,s.jsx)(oe,{className:o}),e[7]=o,e[8]=d);let h=x&&l&&"font-semibold",p;e[9]===h?p=e[10]:(p=M(h),e[9]=h,e[10]=p);let y;e[11]===n.name?y=e[12]:(y=n.name===""?(0,s.jsx)("i",{children:"Not connected"}):n.name,e[11]=n.name,e[12]=y);let v;e[13]!==p||e[14]!==y?(v=(0,s.jsx)("span",{className:p,children:y}),e[13]=p,e[14]=y,e[15]=v):v=e[15];let w;e[16]!==m||e[17]!==v||e[18]!==g||e[19]!==c||e[20]!==d?(w=(0,s.jsxs)(te,{className:"text-sm flex flex-row gap-1 items-center cursor-pointer rounded-none",onSelect:m,value:g,children:[c,d,v]}),e[16]=m,e[17]=v,e[18]=g,e[19]=c,e[20]=d,e[21]=w):w=e[21];let _=l&&i,S;return e[22]!==w||e[23]!==_?(S=(0,s.jsxs)(s.Fragment,{children:[w,_]}),e[22]=w,e[23]=_,e[24]=S):S=e[24],S},ht=r=>{let e=(0,B.c)(22),{schemas:t,defaultSchema:a,defaultDatabase:n,dialect:i,engineName:l,databaseName:N,hasSearch:x,searchValue:j}=r;if(t.length===0){let m;return e[0]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsx)(Q,{content:"No schemas available",className:"pl-6"}),e[0]=m):m=e[0],m}let b;if(e[1]!==N||e[2]!==n||e[3]!==a||e[4]!==i||e[5]!==l||e[6]!==x||e[7]!==t||e[8]!==j){let m;e[10]===j?m=e[11]:(m=u=>j?u.tables.some(o=>o.name.toLowerCase().includes(j.toLowerCase())):!0,e[10]=j,e[11]=m);let g=t.filter(m),c;e[12]!==N||e[13]!==n||e[14]!==a||e[15]!==i||e[16]!==l||e[17]!==x||e[18]!==j?(c=u=>(0,s.jsx)(xt,{databaseName:N,schema:u,hasSearch:x,children:(0,s.jsx)(ye,{tables:u.tables,searchValue:j,sqlTableContext:{engine:l,database:N,schema:u.name,defaultSchema:a,defaultDatabase:n,dialect:i}})},u.name),e[12]=N,e[13]=n,e[14]=a,e[15]=i,e[16]=l,e[17]=x,e[18]=j,e[19]=c):c=e[19],b=g.map(c),e[1]=N,e[2]=n,e[3]=a,e[4]=i,e[5]=l,e[6]=x,e[7]=t,e[8]=j,e[9]=b}else b=e[9];let f;return e[20]===b?f=e[21]:(f=(0,s.jsx)(s.Fragment,{children:b}),e[20]=b,e[21]=f),f},xt=r=>{let e=(0,B.c)(23),{databaseName:t,schema:a,children:n,hasSearch:i}=r,[l,N]=q.useState(i),[x,j]=q.useState(!1),b=`${t}:${a.name}`;if(le(a.name))return n;let f;e[0]!==l||e[1]!==x?(f=()=>{N(!l),j(!x)},e[0]=l,e[1]=x,e[2]=f):f=e[2];let m;e[3]===l?m=e[4]:(m=(0,s.jsx)(be,{isExpanded:l}),e[3]=l,e[4]=m);let g=x&&l&&"text-foreground",c;e[5]===g?c=e[6]:(c=M("h-4 w-4 text-muted-foreground",g),e[5]=g,e[6]=c);let u;e[7]===c?u=e[8]:(u=(0,s.jsx)(Le,{className:c}),e[7]=c,e[8]=u);let o=x&&l&&"font-semibold",d;e[9]===o?d=e[10]:(d=M(o),e[9]=o,e[10]=d);let h;e[11]!==a.name||e[12]!==d?(h=(0,s.jsx)("span",{className:d,children:a.name}),e[11]=a.name,e[12]=d,e[13]=h):h=e[13];let p;e[14]!==f||e[15]!==m||e[16]!==u||e[17]!==h||e[18]!==b?(p=(0,s.jsxs)(te,{className:"text-sm flex flex-row gap-1 items-center pl-5 cursor-pointer rounded-none",onSelect:f,value:b,children:[m,u,h]}),e[14]=f,e[15]=m,e[16]=u,e[17]=h,e[18]=b,e[19]=p):p=e[19];let y=l&&n,v;return e[20]!==y||e[21]!==p?(v=(0,s.jsxs)(s.Fragment,{children:[p,y]}),e[20]=y,e[21]=p,e[22]=v):v=e[22],v},ye=r=>{let e=(0,B.c)(24),{tables:t,sqlTableContext:a,searchValue:n}=r,{addTableList:i}=ne(),[l,N]=q.useState(!1),[x,j]=q.useState(!1),b;e[0]!==i||e[1]!==a||e[2]!==t.length||e[3]!==l?(b=async()=>{if(t.length===0&&a&&!l){N(!0),j(!0);let{engine:o,database:d,schema:h}=a,p=await Se.request({engine:o,database:d,schema:h});if(!(p!=null&&p.tables))throw j(!1),Error("No tables available");i({tables:p.tables,sqlTableContext:a}),j(!1)}},e[0]=i,e[1]=a,e[2]=t.length,e[3]=l,e[4]=b):b=e[4];let f;e[5]!==a||e[6]!==t.length||e[7]!==l?(f=[t.length,a,l],e[5]=a,e[6]=t.length,e[7]=l,e[8]=f):f=e[8];let{isPending:m,error:g}=je(b,f);if(m||x){let o;return e[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(fe,{message:"Loading tables...",className:"pl-12"}),e[9]=o):o=e[9],o}if(g){let o;return e[10]===g?o=e[11]:(o=(0,s.jsx)(ge,{error:g,className:"pl-12"}),e[10]=g,e[11]=o),o}if(t.length===0){let o;return e[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(Q,{content:"No tables found",className:"pl-9"}),e[12]=o):o=e[12],o}let c;if(e[13]!==n||e[14]!==a||e[15]!==t){let o;e[17]===n?o=e[18]:(o=p=>n?p.name.toLowerCase().includes(n.toLowerCase()):!0,e[17]=n,e[18]=o);let d=t.filter(o),h;e[19]!==n||e[20]!==a?(h=p=>(0,s.jsx)(ft,{table:p,sqlTableContext:a,isSearching:!!n},p.name),e[19]=n,e[20]=a,e[21]=h):h=e[21],c=d.map(h),e[13]=n,e[14]=a,e[15]=t,e[16]=c}else c=e[16];let u;return e[22]===c?u=e[23]:(u=(0,s.jsx)(s.Fragment,{children:c}),e[22]=c,e[23]=u),u},ft=r=>{let e=(0,B.c)(64),{table:t,sqlTableContext:a,isSearching:n}=r,{addTable:i}=ne(),[l,N]=q.useState(!1),[x,j]=q.useState(!1),b=t.columns.length>0,f;e[0]!==i||e[1]!==l||e[2]!==a||e[3]!==t.name||e[4]!==b||e[5]!==x?(f=async()=>{if(l&&!b&&a&&!x){j(!0);let{engine:E,database:Y,schema:ve}=a,Z=await Oe.request({engine:E,database:Y,schema:ve,tableName:t.name});if(!(Z!=null&&Z.table))throw Error("No table details available");i({table:Z.table,sqlTableContext:a})}},e[0]=i,e[1]=l,e[2]=a,e[3]=t.name,e[4]=b,e[5]=x,e[6]=f):f=e[6];let m;e[7]!==l||e[8]!==b?(m=[l,b],e[7]=l,e[8]=b,e[9]=m):m=e[9];let{isFetching:g,isPending:c,error:u}=je(f,m),o=G(Me),d=st(),{createNewCell:h}=$e(),p=Ne(),y;e[10]!==p||e[11]!==o||e[12]!==h||e[13]!==d||e[14]!==a||e[15]!==t?(y=()=>{at({autoInstantiate:o,createNewCell:h,fromCellId:d}),p((()=>{if(t.source_type==="catalog"){let E=a!=null&&a.database?`${a.database}.${t.name}`:t.name;return`${t.engine}.load_table("${E}")`}if(a)return ie({table:t,columnName:"*",sqlTableContext:a});switch(t.source_type){case"local":return`mo.ui.table(${t.name})`;case"duckdb":case"connection":return ie({table:t,columnName:"*",sqlTableContext:a});default:return Ue(t.source_type),""}})())},e[10]=p,e[11]=o,e[12]=h,e[13]=d,e[14]=a,e[15]=t,e[16]=y):y=e[16];let v=y,w;e[17]!==t.num_columns||e[18]!==t.num_rows?(w=()=>{let E=[];return t.num_rows!=null&&E.push(`${t.num_rows} rows`),t.num_columns!=null&&E.push(`${t.num_columns} columns`),E.length===0?null:(0,s.jsx)("div",{className:"flex flex-row gap-2 items-center pl-6 group-hover:hidden",children:(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:E.join(", ")})})},e[17]=t.num_columns,e[18]=t.num_rows,e[19]=w):w=e[19];let _=w,S;e[20]!==u||e[21]!==g||e[22]!==c||e[23]!==a||e[24]!==t?(S=()=>{if(c||g)return(0,s.jsx)(fe,{message:"Loading columns...",className:"pl-12"});if(u)return(0,s.jsx)(ge,{error:u,className:"pl-12"});let E=t.columns;return E.length===0?(0,s.jsx)(Q,{content:"No columns found",className:"pl-12"}):E.map(Y=>(0,s.jsx)(bt,{table:t,column:Y,sqlTableContext:a},Y.name))},e[20]=u,e[21]=g,e[22]=c,e[23]=a,e[24]=t,e[25]=S):S=e[25];let I=S,D;e[26]!==l||e[27]!==n||e[28]!==t.source_type||e[29]!==t.type?(D=()=>{if(t.source_type!=="local")return(0,s.jsx)(t.type==="table"?Ce:Ie,{className:"h-3 w-3",strokeWidth:l||n?2.5:void 0})},e[26]=l,e[27]=n,e[28]=t.source_type,e[29]=t.type,e[30]=D):D=e[30];let L=D,z=a?`${a.database}.${a.schema}.${t.name}`:t.name,P=a&&(le(a.schema)?"pl-9":"pl-12"),V=(l||n)&&"font-semibold",C;e[31]!==P||e[32]!==V?(C=M("rounded-none group h-8 cursor-pointer",P,V),e[31]=P,e[32]=V,e[33]=C):C=e[33];let $;e[34]===l?$=e[35]:($=()=>N(!l),e[34]=l,e[35]=$);let T;e[36]===L?T=e[37]:(T=L(),e[36]=L,e[37]=T);let F;e[38]===t.name?F=e[39]:(F=(0,s.jsx)("span",{className:"text-sm",children:t.name}),e[38]=t.name,e[39]=F);let A;e[40]!==T||e[41]!==F?(A=(0,s.jsxs)("div",{className:"flex gap-2 items-center flex-1",children:[T,F]}),e[40]=T,e[41]=F,e[42]=A):A=e[42];let O;e[43]===_?O=e[44]:(O=_(),e[43]=_,e[44]=O);let k;e[45]===v?k=e[46]:(k=Ke.stopPropagation(()=>v()),e[45]=v,e[46]=k);let W;e[47]===Symbol.for("react.memo_cache_sentinel")?(W=(0,s.jsx)(Ge,{className:"h-3 w-3"}),e[47]=W):W=e[47];let R;e[48]===k?R=e[49]:(R=(0,s.jsx)(ee,{content:"Add table to notebook",delayDuration:400,children:(0,s.jsx)(H,{className:"group-hover:inline-flex hidden",variant:"text",size:"icon",onClick:k,children:W})}),e[48]=k,e[49]=R);let K;e[50]!==l||e[51]!==$||e[52]!==A||e[53]!==O||e[54]!==R||e[55]!==C||e[56]!==z?(K=(0,s.jsxs)(te,{className:C,value:z,"aria-selected":l,forceMount:!0,onSelect:$,children:[A,O,R]}),e[50]=l,e[51]=$,e[52]=A,e[53]=O,e[54]=R,e[55]=C,e[56]=z,e[57]=K):K=e[57];let J;e[58]!==l||e[59]!==I?(J=l&&I(),e[58]=l,e[59]=I,e[60]=J):J=e[60];let X;return e[61]!==K||e[62]!==J?(X=(0,s.jsxs)(s.Fragment,{children:[K,J]}),e[61]=K,e[62]=J,e[63]=X):X=e[63],X},bt=r=>{var A,O;let e=(0,B.c)(48),{table:t,column:a,sqlTableContext:n}=r,[i,l]=q.useState(!1),N=G(ce),x=se(Ee);N&&i&&l(!1),x(i?k=>new Set([...k,`${t.name}:${a.name}`]):k=>(k.delete(`${t.name}:${a.name}`),new Set(k)));let j=Ne(),{columnsPreviews:b}=Fe(),f;e[0]!==a.name||e[1]!==t.primary_keys?(f=((A=t.primary_keys)==null?void 0:A.includes(a.name))||!1,e[0]=a.name,e[1]=t.primary_keys,e[2]=f):f=e[2];let m=f,g;e[3]!==a.name||e[4]!==t.indexes?(g=((O=t.indexes)==null?void 0:O.includes(a.name))||!1,e[3]=a.name,e[4]=t.indexes,e[5]=g):g=e[5];let c=g,u;e[6]===j?u=e[7]:(u=k=>{j(k)},e[6]=j,e[7]=u);let o=u,d=gt,h=i?"font-semibold":"",p;e[8]!==a.name||e[9]!==h?(p=(0,s.jsx)("span",{className:h,children:a.name}),e[8]=a.name,e[9]=h,e[10]=p):p=e[10];let y=p,v=`${t.name}.${a.name}`,w=`${t.name}.${a.name}`,_;e[11]===i?_=e[12]:(_=()=>l(!i),e[11]=i,e[12]=_);let S=n?"pl-14":"pl-7",I;e[13]===S?I=e[14]:(I=M("flex flex-row gap-2 items-center flex-1",S),e[13]=S,e[14]=I);let D;e[15]!==a.type||e[16]!==y?(D=(0,s.jsx)(Ze,{columnName:y,dataType:a.type}),e[15]=a.type,e[16]=y,e[17]=D):D=e[17];let L;e[18]===m?L=e[19]:(L=m&&d({tooltipContent:"Primary key",content:"PK"}),e[18]=m,e[19]=L);let z;e[20]===c?z=e[21]:(z=c&&d({tooltipContent:"Indexed",content:"IDX"}),e[20]=c,e[21]=z);let P;e[22]!==I||e[23]!==D||e[24]!==L||e[25]!==z?(P=(0,s.jsxs)("div",{className:I,children:[D,L,z]}),e[22]=I,e[23]=D,e[24]=L,e[25]=z,e[26]=P):P=e[26];let V;e[27]===a.name?V=e[28]:(V=(0,s.jsx)(ee,{content:"Copy column name",delayDuration:400,children:(0,s.jsx)(H,{variant:"text",size:"icon",className:"group-hover:opacity-100 opacity-0 hover:bg-muted text-muted-foreground hover:text-foreground",children:(0,s.jsx)(He,{tooltip:!1,value:a.name,className:"h-3 w-3"})})}),e[27]=a.name,e[28]=V);let C;e[29]===a.external_type?C=e[30]:(C=(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:a.external_type}),e[29]=a.external_type,e[30]=C);let $;e[31]!==P||e[32]!==V||e[33]!==C||e[34]!==v||e[35]!==w||e[36]!==_?($=(0,s.jsxs)(te,{className:"rounded-none py-1 group cursor-pointer",value:w,onSelect:_,children:[P,V,C]},v),e[31]=P,e[32]=V,e[33]=C,e[34]=v,e[35]=w,e[36]=_,e[37]=$):$=e[37];let T;e[38]!==a||e[39]!==b||e[40]!==o||e[41]!==i||e[42]!==n||e[43]!==t?(T=i&&(0,s.jsx)("div",{className:"pl-10 pr-2 py-2 bg-(--slate-1) shadow-inner border-b",children:(0,s.jsx)(Be,{children:(0,s.jsx)(Ye,{table:t,column:a,onAddColumnChart:o,preview:b.get(n?`${n.database}.${n.schema}.${t.name}:${a.name}`:`${t.name}:${a.name}`),sqlTableContext:n})})}),e[38]=a,e[39]=b,e[40]=o,e[41]=i,e[42]=n,e[43]=t,e[44]=T):T=e[44];let F;return e[45]!==$||e[46]!==T?(F=(0,s.jsxs)(s.Fragment,{children:[$,T]}),e[45]=$,e[46]=T,e[47]=F):F=e[47],F};function gt(r){let{tooltipContent:e,content:t}=r;return(0,s.jsx)(ee,{content:e,delayDuration:100,children:(0,s.jsx)("span",{className:"text-xs text-black bg-gray-100 dark:invert rounded px-1",children:t})})}var jt=U(ae(),1),Nt=()=>{let r=(0,jt.c)(1),e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(dt,{}),r[0]=e):e=r[0],e};export{Nt as default};
