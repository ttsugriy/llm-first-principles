import{s as g}from"./chunk-DZLz74EQ.js";import{t as w}from"./react-BcIddLXZ.js";import{E as L,ht as v,m as F,mt as C,pt as S}from"./cells-DV6dfoCq.js";import{t as M}from"./compiler-runtime-Cr9loedd.js";import{t as N}from"./jsx-runtime-mwDPpfh_.js";import{t as T}from"./cn-DEUt_IsG.js";import{r as b}from"./button-Zjtz1syG.js";import{t as _}from"./useLifecycle-CxNbfWnk.js";import{t as j}from"./createLucideIcon-CaU6_Jtx.js";import{r as k}from"./input-DuVApvWu.js";import{t as H}from"./tooltip-CerBk_un.js";var I=j("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),B=g(M(),1),y=g(w(),1),E=g(N(),1);const K=u=>{let e=(0,B.c)(16),r,o,l,a,s;e[0]===u?(r=e[1],o=e[2],l=e[3],a=e[4],s=e[5]):({value:s,onChange:r,placeholder:l,onEnterKey:o,...a}=u,e[0]=u,e[1]=r,e[2]=o,e[3]=l,e[4]=a,e[5]=s);let t=(0,y.useRef)(null),n=x(s,r),i;e[6]===n.onBlur?i=e[7]:(i=()=>{let m=n.onBlur,p=t.current;if(p)return p.addEventListener("blur",m),()=>{p.removeEventListener("blur",m)}},e[6]=n.onBlur,e[7]=i),_(i);let h=n.value,d=n.onChange,f;e[8]===o?f=e[9]:(f=b.onEnter(m=>{b.stopPropagation()(m),o==null||o()}),e[8]=o,e[9]=f);let c;return e[10]!==n.onChange||e[11]!==n.value||e[12]!==l||e[13]!==a||e[14]!==f?(c=(0,E.jsx)(k,{"data-testid":"cell-name-input",value:h,onChange:d,ref:t,placeholder:l,className:"shadow-none! hover:shadow-none focus:shadow-none focus-visible:shadow-none",onKeyDown:f,...a}),e[10]=n.onChange,e[11]=n.value,e[12]=l,e[13]=a,e[14]=f,e[15]=c):c=e[15],c},D=u=>{let e=(0,B.c)(13),{value:r,cellId:o,className:l}=u,{updateCellName:a}=L(),s;e[0]!==o||e[1]!==a?(s=p=>a({cellId:o,name:p}),e[0]=o,e[1]=a,e[2]=s):s=e[2];let t=x(r,s);if(C(r))return null;let n=t.focusing?"":"text-ellipsis",i;e[3]!==l||e[4]!==n?(i=T("outline-hidden border hover:border-cyan-500/40 focus:border-cyan-500/40",n,l),e[3]=l,e[4]=n,e[5]=i):i=e[5];let h=t.onChange,d=t.onBlur,f=t.onFocus,c;e[6]===Symbol.for("react.memo_cache_sentinel")?(c=b.onEnter(z),e[6]=c):c=e[6];let m;return e[7]!==t.onBlur||e[8]!==t.onChange||e[9]!==t.onFocus||e[10]!==i||e[11]!==r?(m=(0,E.jsx)(H,{content:"Click to rename",children:(0,E.jsx)("span",{className:i,contentEditable:!0,suppressContentEditableWarning:!0,onChange:h,onBlur:d,onFocus:f,onKeyDown:c,children:r})}),e[7]=t.onBlur,e[8]=t.onChange,e[9]=t.onFocus,e[10]=i,e[11]=r,e[12]=m):m=e[12],m};function x(u,e){let[r,o]=(0,y.useState)(u),[l,a]=(0,y.useState)(!1),s=t=>{if(t!==u){if(!t||C(t)){e(t);return}e(S(t,F()))}};return{value:C(r)?"":r,focusing:l,onChange:t=>{let n=t.target.value;o(v(n))},onBlur:t=>{if(t.target instanceof HTMLInputElement){let n=t.target.value;s(v(n))}else t.target instanceof HTMLSpanElement&&(s(v(t.target.innerText.trim())),t.target.scrollLeft=0,a(!1))},onFocus:()=>{a(!0)}}}function z(u){u.target instanceof HTMLElement&&u.target.blur()}export{K as n,I as r,D as t};
